<!-- //////////////////////////////////////////
		fill every "here" sign using jinja2 template
		/////////////////////////////////////////// -->
		
{% extends "main.html" %}
{% block body %}
<div class="container">
	<h4>
		<div style="row-fluid">
			<div class="span12">
				<div class="row-fluid" style ='text-align:center'>
					<table class="table">
						<thead>
							<tr>
								<td>{% if articlesOnBoard.courseName %}{{ articlesOnBoard.courseId }} {{ articlesOnBoard.courseName }}{% else %}Server Noticie{% endif %}</td>
								<td style ='text-align:right'>{% if articlesOnBoard.writtenDate %}{{ articlesOnBoard.writtenDate }}{% endif %}</td>
							</tr>
							
							<tr>
							<h4>
								<td>{% if articlesOnBoard.title %}{{ articlesOnBoard.title }}{% endif %}</td>
								<td style ='text-align:right'>{% if articlesOnBoard.writerId %}{{ articlesOnBoard.writerId }}{% endif %}</td>
							</tr>
						</thead>
					</table>
				</div>
			</div>
		</div>
	</h4>
</div>

<!-- content block -->
<div class="container">
	<!-- put contents here -->
	<PRE style ="background-color: rgba(255, 255, 255, 0)">{% if articlesOnBoard.content %}{{ articlesOnBoard.content }}{% endif %}</PRE>
	<div style="text-align:center">
		<form method="post">
		
			{# Article Like Case #}
			<button class="btn btn-default btn-lg" type="submit" name="articleLike">
				{% if isPostLike == 'FALSE' %} UnLike {% else %} Like {% endif %}<i class="icon-thumbs-up"></i>
			</button>
			
			{% if articlesOnBoard.writerId == session['memberId'] or 'SERVER_ADMINISTRATOR' in session['authority'] or 'COURSE_ADMINISTRATOR' in session['authority'] %}
			<button href="#deleteArticle" class="delete btn" data-toggle="modal">Delete<i class="icon-trash"></i></button>
			<div id="deleteArticle" class="modal hide fade">
				<div class="modal-header">
					<h3>Delete Post</h3>
				</div>
				<div class="modal-body">
					<p>Do you really want to delete it?</p>
				</div>
				<div class="modal-footer">
					<button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
					<button href="#" class="delete btn btn-primary" name ="deleteArticle" type="submit">Confirm</button>
				</div>
			</div>
		</form>
		
		{# Modify Article #}
		<a href='{{ url_for("GradeServer.write", activeTabCourseId = activeTabCourseId, articleIndex = articlesOnBoard.articleIndex) }}'><button type="button" class ="btn modify">Modify</button></a>
			{% endif %}
	</div>
</div>
<!-- end content block -->
<hr style="margin-left:5%;margin-right:5%">

<!-- comment block -->
<div class="container">
	<!-- put the comments here -->

	<form method="post">
		<div class = 'row-fluid'>
			<div class = 'span10'>
				<textarea class="span12" onkeyup="autoSize(this)" autocomplete="off" name="writeReplytoArticle" placeholder="Comment" rows = 3></textarea>
			</div>
			<div style = 'padding-left:10.5px'>
				<button class="submit">Write<i class="icon-pencil"></i></button>
			</div>
		</div>
	</form>

	{% for repliesOnBoardRecord in repliesOnBoardRecords %}
	<div class = 'row-fluid'>
		<form method = "post" id="myform">
			<a href = '{{ url_for ("GradeServer.submission_record", memberId = repliesOnBoardRecord.boardReplierId, sortCondition = "submissionDate", pageNum = 1) }}'>
				{% if repliesOnBoardRecord.boardReplierId %}{{ repliesOnBoardRecord.boardReplierId }}{% endif %}
			</a>
			<!-- Content, WrittenDate -->
			
			<div class = 'row-fluid'>
				<div class = 'span10'>
			{% if boardReplyIndex and boardReplyIndex == repliesOnBoardRecord.boardReplyIndex %}
					<textarea class="span12" autofocus = "autofocus" onfocus="autoSize(this)" onkeyup="autoSize(this)" autocomplete="off" name="modifyConfirmArticleComment{{ boardReplyIndex }}" placeholder="Comment" rows = 6>{% if repliesOnBoardRecord.boardReplyContent %}{{ repliesOnBoardRecord.boardReplyContent }}{% endif %}</textarea>
				</div>
				<div style = 'padding-left:10.5px'>
					<button class="submit">Confirm</button>
				</div>
			</div>
			{% else %}
			:  <textarea class="span12" readonly ="reaonly" onclick="autoSize(this)" rows = 6>{% if repliesOnBoardRecord.boardReplyContent %}{{ repliesOnBoardRecord.boardReplyContent }}{% endif %}</textarea>
			| {% if repliesOnBoardRecord.boardRepliedDate %}{{ repliesOnBoardRecord.boardRepliedDate }}{% endif %}
			<!-- like button -->
			<button class="like btn btn-link" href="#" name="articleReplyLike{{ repliesOnBoardRecord.boardReplyIndex }}" type="submit">
				{% if isLikeRecords[loop.index0] == 'TRUE' %} 
				Like 
				{% else %} 
				UnLike 
				{% endif %}
			</button>
			{% if repliesOnBoardRecord.sumOfLikeCount %}{{ repliesOnBoardRecord.sumOfLikeCount }}{% else %}0{% endif %}
			
			<!-- delete button -->
			<!-- replier and masters are availables to delete the comments -->
				{% if repliesOnBoardRecord.boardReplierId == session['memberId'] or 'SERVER_ADMINISTRATOR' in session['authority'] or 'COURSE_ADMINISTRATOR' in session['authority'] %}
			<a href="#deleteArticleReply{{ repliesOnBoardRecord.boardReplyIndex }}" role="button" class="btn btn-link" data-toggle="modal"><i class="icon-trash"></i></a>
			<div id="deleteArticleReply{{ repliesOnBoardRecord.boardReplyIndex }}" class="modal hide fade" style="text-align:center">
				<div class="modal-header">
					<h3>Delete Comment</h3>
				</div>
				<div class="modal-body">
					<p>Do you really want to delete it?</p>
				</div>
				<div class="modal-footer">
					<button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
					<button href="#" class="delete btn btn-primary" name="deleteArticleReply{{ repliesOnBoardRecord.boardReplyIndex }}" type="submit">Confirm</button>
				</div>
			</div>
			
			<!-- modify button -->
			<!-- replier and masters are available to modify the comments -->
			<button name ='modifyArticleComment{{ repliesOnBoardRecord.boardReplyIndex }}' class="btn btn-link"><i class="icon-pencil"></i></button>
				{% endif %}
			{% endif %}
			<br>
		</form>
	</div>
	{% endfor %}
</div>
<style> textarea {width:300px;overflow:visible} </style>
<script>
	function autoSize(obj) {
	  obj.style.height = "1px";
	  obj.style.height = (20 + obj.scrollHeight) + "px";
}
</script>
<!-- end comment block -->
{% endblock %}