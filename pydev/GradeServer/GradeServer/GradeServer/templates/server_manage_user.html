<!-- //////////////////////////////////////////
		fill every "here" sign using jinja2 template
		/////////////////////////////////////////// -->
		
{%- extends "main.html" -%}
{%- block body %}
<div class="container">
	<div>
		<h3>User management</h3>
		<!-- if any button is checked, then showing modal pop -->
		<div style="text-align:right">
			<a href="{{ url_for('GradeServer.server_add_user') }}">
				<button class="btn" type="button">Add</button>
			</a>
			<a class="btn" data-toggle="modal" role="button" onclick="showingDeleteModal()">Delete</a>
		</div>

		<!-- hidden modal pop -->
		<!-- if any item choosed -->
		<div class="modal hide fade" id="deleteModal"
			  aria-labelledby="deleteModalLabel" aria-hidden="true"
			  role="dialog" tabindex="-1">
			<div class="modal-header">
				<button class="close" data-dismiss="modal"
						  type="button" aria-hidden="true">x</button>
				<h3 id="deleteModalLabel">Delete User</h3>
			</div>
			<div class="modal-body">
				<p>Do you really want to delete it?</p>
			</div>
			<div class="modal-footer">
				<form id="deleteConfirm" method="post">
					<button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
					<button class="btn btn-primary" type="submit">Confirm</button>
				
			</div>
		</div>
		<!-- no items choosed -->
		<div class="modal hide fade" id="deleteNoItem"
			  aria-labelledby="deleteModalLabel" aria-hidden="true"
			  role="dialog" tabindex="-1">
			<div class="modal-header">
				<button class="close" data-dismiss="modal"
						  stype="button" aria-hidden="true">x</button>
				<h3 id="deleteModalLabel">Delete User</h3>
			</div>
			<div class="modal-body">
				<p>No items choiced</p>
			</div>
			<div class="modal-footer">
				<button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
			</div>
		</div>
		<!-- end hidden modal pop -->

		<table class="table table-bordered" style="margin-top:10px">
			<thead>
				<tr>
					<td>Index
					<td>ID
					<td>College&Department
					<td>Name
					<td>Phone
					<td>E-mail
					<td><abbr title="SA: Server Administrator, CA: Course Administrator">Authority</abbr>
					<td>Last Access
					<td>Check
			<tbody>
				<script> index = {{ index }}; </script>
				{%- for user, college, department in users %}
				<tr>
					<td><script> document.write(index--); </script>
					<td>{{ user.memberId }}
					<td>{{ college.collegeName }} {{ department.departmentName }}
					<td>{{ user.memberName }}
					<td>{{ user.contactNumber }}
					<td>{{ user.emailAddress }}
					<!-- Up to you. -->
					<!-- Now we set USER as Student, SERVER_ADMINISTRATOR as SA, COURSE_ADMINISTRATOR  as CA -->
					<!-- Because using meta values, not enough width -->
					<td>{%- for authority in user.authority %}
							{%- if authority==SETResources.const.USER %}
								Student
							{% elif authority==SETResources.const.SERVER_ADMINISTRATOR %}
								SA
							{% elif authority==SETResources.const.COURSE_ADMINISTRATOR %}
								CA
							{% else %}
								Unknown
							{% endif -%}
						{% endfor -%}
					<td>
						<script>
						var date = "{{ user.lastAccessDate }}";
						if(date != "None"){
							// slice from "YYYY-MM-DD hh:mm:ss" to "YY-MM-DD hh:mm"
							date = date.substr(2,14);
						}
						document.write(date);
						</script>
					<td>
						<label class="checkbox-center">
							<input class="box-check" name="{{ user.memberId }}"
									type="checkbox" form="deleteConfirm">
						</label>
				{% endfor -%}
				</form>
		</table>
	</div>
</div>
{% endblock -%}
